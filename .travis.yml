language: perl
sudo:     false

addons:
  apt:
    packages:
      - libluajit-5.1-2
      - libluajit-5.1-dev

env:
  global:
    - LUAJIT_LIB=/usr/lib/x86_64-linux-gnu/
    - LUAJIT_INC=/usr/include/luajit-2.0/
  matrix:
    - VER_LIBSASS=3.3.6 VER_LUA_NGINX=0.10.8 VER_NGINX=1.10.3
    - VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.8 VER_NGINX=1.10.3
    - VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.10 VER_NGINX=1.12.2
    - VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.10 VER_NGINX=1.13.6
    - DYNAMIC=true VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.8 VER_NGINX=1.10.3
    - DYNAMIC=true VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.10 VER_NGINX=1.12.2
    - DYNAMIC=true VER_LIBSASS=3.4.7 VER_LUA_NGINX=0.10.10 VER_NGINX=1.13.6

install: cpanm -v --notest Test::Nginx
script:  ./compile_and_test.sh
